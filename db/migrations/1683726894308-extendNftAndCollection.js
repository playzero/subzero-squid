module.exports = class Data1683726894308 {
  name = 'Data1683726894308'

  async up(db) {
    await db.query(`ALTER TABLE "battlepass_nft" DROP CONSTRAINT "FK_011aba7b83327bfd2602c04354b"`)
    await db.query(`ALTER TABLE "battlepass" DROP CONSTRAINT "FK_28e3dd04131afd63b535212b643"`)
    await db.query(`DROP INDEX "public"."IDX_011aba7b83327bfd2602c04354"`)
    await db.query(`DROP INDEX "public"."IDX_28e3dd04131afd63b535212b64"`)
    await db.query(`CREATE TABLE "nft_attribute" ("id" character varying NOT NULL, "namespace" text NOT NULL, "key" text NOT NULL, "value" text NOT NULL, "nft_id" character varying, CONSTRAINT "PK_e0cb689a52118afb56c43a48f81" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_ee180c2bfa00844a33a89d760f" ON "nft_attribute" ("nft_id") `)
    await db.query(`CREATE TABLE "nft_collection_attribute" ("id" character varying NOT NULL, "namespace" text NOT NULL, "key" text NOT NULL, "value" text NOT NULL, "collection_id" character varying, CONSTRAINT "PK_9f780dfddea795cf9f9743c6ab7" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_f0dc63ef6e99c987de755701a2" ON "nft_collection_attribute" ("collection_id") `)
    await db.query(`ALTER TABLE "nft" DROP COLUMN "metadata_is_frozen"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "metadata_is_frozen"`)
    await db.query(`ALTER TABLE "battlepass_nft" DROP COLUMN "owner_id"`)
    await db.query(`ALTER TABLE "battlepass" DROP COLUMN "org_id"`)
    await db.query(`ALTER TABLE "nft" ADD "item_id" text NOT NULL`)
    await db.query(`ALTER TABLE "nft" ADD "metadata_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft" ADD "transfers_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft" ADD "attributes_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "metadata_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "max_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "transfers_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "attributes_locked" boolean NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "mint_type" text NOT NULL`)
    await db.query(`ALTER TABLE "nft_collection" ADD "mint_price" numeric`)
    await db.query(`ALTER TABLE "nft_collection" ADD "mint_start_block" integer`)
    await db.query(`ALTER TABLE "nft_collection" ADD "mint_end_block" integer`)
    await db.query(`ALTER TABLE "battlepass" ADD "collection_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "battlepass" ADD "organization_id" character varying`)
    await db.query(`CREATE INDEX "IDX_cebfe7a575d8123b99d855bb27" ON "battlepass" ("organization_id") `)
    await db.query(`CREATE INDEX "IDX_ea5a9d28a47cdec6482ecb6cc7" ON "battlepass" ("collection_id") `)
    await db.query(`ALTER TABLE "nft_attribute" ADD CONSTRAINT "FK_ee180c2bfa00844a33a89d760fe" FOREIGN KEY ("nft_id") REFERENCES "nft"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "nft_collection_attribute" ADD CONSTRAINT "FK_f0dc63ef6e99c987de755701a20" FOREIGN KEY ("collection_id") REFERENCES "nft_collection"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "battlepass" ADD CONSTRAINT "FK_cebfe7a575d8123b99d855bb278" FOREIGN KEY ("organization_id") REFERENCES "organization"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "battlepass" ADD CONSTRAINT "FK_ea5a9d28a47cdec6482ecb6cc71" FOREIGN KEY ("collection_id") REFERENCES "nft_collection"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`ALTER TABLE "battlepass_nft" ADD CONSTRAINT "FK_011aba7b83327bfd2602c04354b" FOREIGN KEY ("owner_id") REFERENCES "identity"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "battlepass" ADD CONSTRAINT "FK_28e3dd04131afd63b535212b643" FOREIGN KEY ("org_id") REFERENCES "organization"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`CREATE INDEX "IDX_011aba7b83327bfd2602c04354" ON "battlepass_nft" ("owner_id") `)
    await db.query(`CREATE INDEX "IDX_28e3dd04131afd63b535212b64" ON "battlepass" ("org_id") `)
    await db.query(`DROP TABLE "nft_attribute"`)
    await db.query(`DROP INDEX "public"."IDX_ee180c2bfa00844a33a89d760f"`)
    await db.query(`DROP TABLE "nft_collection_attribute"`)
    await db.query(`DROP INDEX "public"."IDX_f0dc63ef6e99c987de755701a2"`)
    await db.query(`ALTER TABLE "nft" ADD "metadata_is_frozen" boolean`)
    await db.query(`ALTER TABLE "nft_collection" ADD "metadata_is_frozen" boolean`)
    await db.query(`ALTER TABLE "battlepass_nft" ADD "owner_id" character varying`)
    await db.query(`ALTER TABLE "battlepass" ADD "org_id" character varying`)
    await db.query(`ALTER TABLE "nft" DROP COLUMN "item_id"`)
    await db.query(`ALTER TABLE "nft" DROP COLUMN "metadata_locked"`)
    await db.query(`ALTER TABLE "nft" DROP COLUMN "transfers_locked"`)
    await db.query(`ALTER TABLE "nft" DROP COLUMN "attributes_locked"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "metadata_locked"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "max_locked"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "transfers_locked"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "attributes_locked"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "mint_type"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "mint_price"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "mint_start_block"`)
    await db.query(`ALTER TABLE "nft_collection" DROP COLUMN "mint_end_block"`)
    await db.query(`ALTER TABLE "battlepass" DROP COLUMN "collection_id"`)
    await db.query(`ALTER TABLE "battlepass" DROP COLUMN "organization_id"`)
    await db.query(`DROP INDEX "public"."IDX_cebfe7a575d8123b99d855bb27"`)
    await db.query(`DROP INDEX "public"."IDX_ea5a9d28a47cdec6482ecb6cc7"`)
    await db.query(`ALTER TABLE "nft_attribute" DROP CONSTRAINT "FK_ee180c2bfa00844a33a89d760fe"`)
    await db.query(`ALTER TABLE "nft_collection_attribute" DROP CONSTRAINT "FK_f0dc63ef6e99c987de755701a20"`)
    await db.query(`ALTER TABLE "battlepass" DROP CONSTRAINT "FK_cebfe7a575d8123b99d855bb278"`)
    await db.query(`ALTER TABLE "battlepass" DROP CONSTRAINT "FK_ea5a9d28a47cdec6482ecb6cc71"`)
  }
}
